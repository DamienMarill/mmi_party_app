<div class="flex flex-col gap-6 max-w-md mx-auto p-4">
  <h2 class="card-title text-2xl font-bold text-center mb-6">Réinitialisation du mot de passe</h2>

  @if (successMessage) {
    <div class="alert alert-success mb-4">
      <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span>{{ successMessage }}</span>
      <button class="btn btn-primary mt-4" routerLink="/login">Se connecter</button>
    </div>
  }

  @if (!successMessage) {
    <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="space-y-4">
      <app-input
        type="password"
        label="Nouveau mot de passe"
        formControlName="password"
        [errorMessage]="getErrorMessage('password')"
      ></app-input>

      <app-input
        type="password"
        label="Confirmation du mot de passe"
        formControlName="password_confirmation"
        [errorMessage]="getErrorMessage('password_confirmation')"
      ></app-input>

      <div class="card-actions justify-end">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="loading || !resetForm.valid">
          @if (loading) {
            <span class="loading loading-spinner"></span>
          }
          Réinitialiser
        </button>
      </div>
    </form>
  }
</div>
